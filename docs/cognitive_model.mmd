graph TB
    subgraph "ğŸ§  zai Agent è®¤çŸ¥æ¶æ„"
        subgraph "é•¿æœŸè®°å¿†å±‚ (Context)"
            C1[ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯<br/>user_profile]
            C2[ğŸ“œ å†å²è®°å½•<br/>history]
            C3[ğŸ“Š å½“å‰çŠ¶æ€<br/>state]
            C4[ğŸ’¡ å­¦ä¹ çŸ¥è¯†<br/>knowledge]
        end

        subgraph "è®¤çŸ¥æ¡†æ¶å±‚ (Persona)"
            P1[ğŸ¯ æƒ…å¢ƒæ„ŸçŸ¥<br/>if/else conditions]
            P2[ğŸ§­ å†³ç­–ç­–ç•¥<br/>system prompts]
            P3[ğŸ’­ æ€ç»´æ¨¡å¼<br/>cognitive style]
        end

        subgraph "æ‰§è¡Œå±‚ (Skill)"
            S1[ğŸ‘ï¸ æ„ŸçŸ¥<br/>ask/exec]
            S2[ğŸ¤” æ¨ç†<br/>process]
            S3[âœ‹ è¡ŒåŠ¨<br/>exec/say/notify]
            S4[ğŸ“ å­¦ä¹ <br/>context update]
        end
    end

    C1 --> P1
    C2 --> P1
    C3 --> P1
    C4 --> P1

    P1 --> P2
    P2 --> S2

    S1 -->|æ›´æ–°| C3
    S2 -->|å†³ç­–| S3
    S3 -->|åé¦ˆ| S4
    S4 -->|å†™å…¥| C1
    S4 -->|å†™å…¥| C2
    S4 -->|å†™å…¥| C4

    style C1 fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style C2 fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style C3 fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style C4 fill:#e1f5ff,stroke:#01579b,stroke-width:2px

    style P1 fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style P2 fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style P3 fill:#fff3e0,stroke:#e65100,stroke-width:2px

    style S1 fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    style S2 fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    style S3 fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    style S4 fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
