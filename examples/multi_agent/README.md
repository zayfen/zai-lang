# Zai 多Agent协作示例：智能餐厅系统

这个示例展示了多个Agent之间如何通过 `notify`/`wait` 机制进行协作。

## 场景说明

- **ChefAgent（厨师）**: 接收订单，处理订单，完成后通知服务员
- **WaiterAgent（服务员）**: 接收顾客订单，通知厨房，等待餐品完成
- **RestaurantManager（经理）**: 启动和管理所有子系统

## 多Agent通信机制

### notify 语句
向目标Agent发送消息：
```zai
notify 目标Agent名称 "消息类型" "消息内容"
```

### wait 语句
等待来自特定Agent的消息：
```zai
[状态变量, 内容变量] = wait 来源Agent名称
```

### start 语句
启动子Agent（后台运行）：
```zai
start Agent名称
```

## 运行方式

### 方式1：手动启动多个终端

```bash
# 终端1 - 启动厨师Agent
python -m zai.cli examples/multi_agent/restaurant.zai --agent ChefAgent

# 终端2 - 启动服务员Agent
python -m zai.cli examples/multi_agent/restaurant.zai --agent WaiterAgent
```

### 方式2：使用Manager自动启动

```bash
# 启动管理器，自动启动所有子Agent
python -m zai.cli examples/multi_agent/restaurant.zai --agent RestaurantManager
```

## 工作流程

```
┌─────────────────────────────────────────────────────────────────┐
│                        智能餐厅系统                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   顾客 ──┐                                                     │
│          │                                                     │
│          ▼                                                     │
│   ┌──────────────┐    notify "NEW_ORDER"    ┌──────────────┐   │
│   │  WaiterAgent │ ───────────────────────► │  ChefAgent   │   │
│   │   (服务员)    │                          │   (厨师)     │   │
│   │              │    wait ChefAgent        │              │   │
│   │              │ ◄─────────────────────── │              │   │
│   │              │    notify "ORDER_READY"  │              │   │
│   └──────────────┘                          └──────────────┘   │
│          │                                                     │
│          ▼                                                     │
│       上餐给顾客                                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 交互示例

```
# WaiterAgent 输出:
==========================================
        服务系统启动 - WaiterAgent
==========================================

欢迎使用智能点餐系统！

请问您的姓名是？ 张三
请问您坐在几号桌？ 5

您好，张三！您的桌号是 5。

----------- 点餐 -----------

今日推荐:
  1. 宫保鸡丁 - 38元
  2. 麻婆豆腐 - 28元
  ...

请输入您要的菜品名称: 宫保鸡丁

已记录: 宫保鸡丁

正在将订单发送到厨房...
订单已发送到厨房

# ChefAgent 输出:
-------------------------------------------
收到新订单！
正在解析订单信息...

订单详情:
   菜品: 宫保鸡丁
   状态: 准备中...

开始烹饪...
   1. 准备食材...
   2. 热锅...
   3. 烹饪中...
   4. 摆盘...

宫保鸡丁 制作完成！
通知服务员取餐...

已通知服务员

# WaiterAgent 继续输出:
厨房通知: 宫保鸡丁 已准备好！
正在为 张三 上菜...

已上菜: 宫保鸡丁
   已上: 1 / 1
```

## 环境变量

可以通过环境变量配置IPC目录：

```bash
export ZAI_IPC_DIR="/tmp/my_zai_ipc"
```

默认使用系统临时目录下的 `zai_ipc` 文件夹。
